<!DOCTYPE html>
<html lang="uk">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Apex Autolab — Контакти</title>
  <link rel="stylesheet" href="assets/css/style.css" />
</head>

<body>
  <header class="header">
    <div class="container">
      <div class="wrap">
        <a class="brand" href="index.html" aria-label="Apex Autolab home">
          <img src="assets/images/logo.png" alt="Apex Autolab logo" />
        </a>

        <nav class="nav" aria-label="Primary">
          <a href="index.html">Головна</a>
          <a href="services.html">Послуги</a>
          <a href="cases.html">Роботи</a>
          <a href="about.html">Про нас</a>
          <a href="contacts.html">Контакти</a>
        </nav>

        <div class="header-cta">
          <a class="btn primary" href="contacts.html#form">Записатися</a>
          <div class="burger" data-burger aria-label="Menu" role="button" tabindex="0">
            <span></span><span></span><span></span>
          </div>
        </div>
      </div>
    </div>
    <div class="mobile" data-mobile>
      <a href="index.html">Головна</a>
      <a href="services.html">Послуги</a>
      <a href="cases.html">Роботи</a>
      <a href="about.html">Про нас</a>
      <a href="contacts.html">Контакти</a>
    </div>
  </header>


  <section class="hero" style="min-height:52vh;padding:72px 0 44px">
    <div class="container">
      <div class="inner">
        <div class="smallcaps">Контакти</div>
        <h1 style="font-size:58px;margin-top:10px">Запис на сервіс</h1>
        <p></p>
      </div>
    </div>
  </section>

  <section>
    <div class="container">
      <div class="grid cols-2">
        <div class="panel reveal">
          <div class="smallcaps">Звʼязок</div>
          <h2 style="margin-top:10px">Контакти</h2>
          <p style="margin-top:14px">
            Телефон: <a href="tel:+380638010111">+38 (063) 801‑01‑11</a><br />
            Email: <a href="mailto:service@apexautolab.ua">service@apexautolab.pro</a><br />
            Локація: м.Cвятопетрівське, вул. Вячеслава Чорновола
          </p>
          <div style="margin-top:18px">
            <a class="btn" href="https://maps.app.goo.gl/TR28YyEaBKahmw9v5" target="_blank" rel="noopener">
              Відкрити в Google Maps →
            </a>
          </div>
        </div>

        <div class="panel reveal" id="form">
          <div class="smallcaps">Форма</div>
          <h2 style="margin-top:10px">Заявка</h2>
          <p style="margin-top:12px">Заповни — заявка піде в Telegram.</p>

          <form id="leadForm" style="margin-top:16px;display:grid;gap:12px">
            <input id="name" placeholder="Імʼя" required
              style="padding:14px;border-radius:14px;border:1px solid rgba(255,255,255,.10);background:rgba(255,255,255,.03);color:var(--text)" />

            <input id="phone" placeholder="Телефон" required
              style="padding:14px;border-radius:14px;border:1px solid rgba(255,255,255,.10);background:rgba(255,255,255,.03);color:var(--text)" />

            <input id="car" placeholder="Авто (марка/модель)"
              style="padding:14px;border-radius:14px;border:1px solid rgba(255,255,255,.10);background:rgba(255,255,255,.03);color:var(--text)" />

            <textarea id="msg" rows="4" placeholder="Коротко опиши проблему"
              style="padding:14px;border-radius:14px;border:1px solid rgba(255,255,255,.10);background:rgba(255,255,255,.03);color:var(--text)"></textarea>

            <div style="display:flex;gap:12px;flex-wrap:wrap;margin-top:6px">
              <button class="btn primary" id="sendBtn" type="submit">Надіслати</button>

              <a class="btn"
                href="mailto:service@apexautolab.ua?subject=Заявка%20Apex%20Autolab&body=Імʼя:%20%0AТелефон:%20%0AАвто:%20%0AПроблема:%20%0A">
                Відкрити Email →
              </a>

              <span id="leadStatus" style="align-self:center;color:rgba(233,236,244,.75);font-size:14px;"></span>
            </div>
          </form>

          <script>
            (function () {
              const API_URL = "https://apex-95tz.onrender.com/api/lead";

              const form = document.getElementById("leadForm");
              const btn = document.getElementById("sendBtn");
              const statusEl = document.getElementById("leadStatus");

              if (!form) return;

              function setStatus(text) {
                if (statusEl) statusEl.textContent = text || "";
              }

              form.addEventListener("submit", async (e) => {
                e.preventDefault();

                const name = (document.getElementById("name")?.value || "").trim();
                const phone = (document.getElementById("phone")?.value || "").trim();
                const car = (document.getElementById("car")?.value || "").trim();
                const msg = (document.getElementById("msg")?.value || "").trim();

                if (!name || !phone) {
                  alert("Заповни імʼя та телефон.");
                  return;
                }

                const oldText = btn ? btn.textContent : "";
                if (btn) {
                  btn.disabled = true;
                  btn.textContent = "Відправляю...";
                }
                setStatus("Відправка…");

                try {
                  const res = await fetch(API_URL, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ name, phone, car, msg }),
                  });

                  const data = await res.json().catch(() => ({}));

                  if (!res.ok || data.ok !== true) {
                    console.error("API error:", data);
                    setStatus("Помилка. Дивись Render Logs.");
                    alert("Помилка відправки. Перевір Render Logs / CORS.");
                    return;
                  }

                  setStatus("Відправлено ✅");
                  alert("Заявка відправлена ✅");
                  form.reset();
                } catch (err) {
                  console.error(err);
                  setStatus("Нема звʼязку з сервером (Render).");
                  alert("Не вдалося підключитися до сервера (Render). Якщо це GitHub Pages — можливо CORS.");
                } finally {
                  if (btn) {
                    btn.disabled = false;
                    btn.textContent = oldText;
                  }
                  setTimeout(() => setStatus(""), 6000);
                }
              });
            })();
          </script>
        </div>

      </div>
    </div>
  </section>


  <footer class="footer" id="contacts">
    <div class="container">
      <div class="top">
        <div>
          <img class="logo" src="assets/images/logo.png" alt="Apex Autolab" />
          <p style="margin-top:12px;max-width:520px;">
            Інженерний підхід до ремонту та діагностики. Складні задачі — наша спеціалізація.
          </p>
        </div>
        <div>
          <h4>Контакти</h4>
          <p><a href="tel:+380638010111">+38 (063) 801-01-11</a></p>
          <p><a href="mailto:service@apexautolab.pro">service@apexautolab.pro</a></p>
          <p style="margin-top:10px;color:rgba(233,236,244,.55)"></p>
        </div>
        <div>
          <h4>Локація</h4>
          <p>м Святопетрівське, вул.Вячеслава Чорновола 35</p>
          <p style="margin-top:10px">
            <a href="https://www.google.com/maps/search/?api=1&query=Apex%20Autolab" target="_blank" rel="noopener">
              Відкрити в Google Maps →
            </a>
          </p>
        </div>
      </div>
      <div class="bottom">
        <span>© Apex Autolab</span>
        <span>Engineering at the limit</span>
      </div>
    </div>
  </footer>

  <script src="assets/js/main.js"></script>
</body>

</html>